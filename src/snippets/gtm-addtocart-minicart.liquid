<script>
    function dlAddToCartUpsale() {
      console.log('funciÃ³n de add to cart upsale corre');
      var pageCategoryUpsale = $(this).data("producttype-upsale");
      var productBrandUpsale = $(this).data("productbrand-upsale");
      var productNameUpsale = $(this).data("producttitle-upsale");
      var productPriceUpsale = $(this).data("productprice-upsale");
      var productSKUUpsale = $(this).data("productsku-upsale");

      console.log("variables upsale capturadas");
      console.log(productName);

        window.dataLayer = window.dataLayer || [];
          window.dataLayer.push({
          'event': 'add_to_cart',
          'ecommerce': {
              'items': [{
                  //'item_name': `${productName}`, // Name or ID is required.
                  'item_id': '67890',
                  'price': '33.75',
                  //'item_brand': `${productBrandUpsale}`,
                  //'item_category': `${pageCategoryUpsale}`,
                  'item_variant': 'Black',
                  'item_list_name': 'Search Results',
                  'item_list_id': 'SR123',
                  'index': 1,
                  'quantity': '2'
              }]
          }
        });

        console.log('dataLayer', JSON.stringify(dataLayer, null, 0));
    };

    window.addEventListener('DOMContentLoaded', (event) => {
    //const currentURLupsale = window.location.href;
    const addToCartButtonsUpsale = document.querySelectorAll('button.add-to-cart-upsale');
      addToCartButtonsUpsale.forEach(function(addToCartButton) {
        console.log('button de upsale');
        addToCartButton.addEventListener('click', dlAddToCartUpsale);
      });
    });
</script>