{% if template == 'index' %}
	<script>
	window.dataLayer = window.dataLayer || [];
	window.dataLayer.push({
		'URL': "{{ canonical_url }}"
	});
	console.log(dataLayer);
	console.log('DL template index');
	</script>
{% endif %}

{% if page.url contains 'pages' %}
	<script>
	window.dataLayer = window.dataLayer || [];
	window.dataLayer.push({
		'URL': '{{ canonical_url }}',
		'pageCategory': '{{ handle }}'
	});
	console.log(dataLayer);
	console.log('DL pages');
	</script>
{% endif %}

{% if template == 'collection' %}
	<script>
	window.dataLayer = window.dataLayer || [];
	window.dataLayer.push({
		'URL': '{{ canonical_url }}',
		'pageCategory': '{{ collection.title }}'
	});
	console.log(dataLayer);
	console.log('DL collections');
	</script>
{% endif %}

{% if product.url contains 'products' %}
{%- assign current_variant = product.selected_or_first_available_variant -%}
	<script>
	window.dataLayer = window.dataLayer || [];
	window.dataLayer.push({
		'URL': '{{ canonical_url }}',
		'productName': '{{ product.title }}',
		'productPrice': {{ product.price | times: 0.01 }},
		'productSKU': '{{ current_variant.sku }}',
		'pageCategory': '{{ collection.title }}',
		'productBrand': '{{ product.vendor }}'
	});
	console.log(dataLayer);
	console.log('DL products');
	</script>
{% endif %}

{% if template == 'cart' %}
	<script>
		window.dataLayer = window.dataLayer || [];
		window.dataLayer.push({
			'cartSubtotal': {{ cart.original_total_price | times: 0.01 }},
			'currency': '{{ shop.currency }}',
			'pageCategory': '{{ template.name }}',
			'products': [
						{% for item in cart.items %}
						{
							'productName': '{{item.title}}',
							'productPrice': {{item.line_price | times: 0.01}},
							'productSKU': '{{item.variant.sku}}',
							'pageCategory': '{{item.product.type}}',
							'productBrand': '{{item.vendor}}'
						},
						{% endfor %}
					],
			'quantity': {{ cart.item_count }},
			'totalPurchase': {{ cart.total_price | times: 0.01 }},
			'URL': '{{ canonical_url }}'
		});
		console.log(dataLayer);
		console.log('DL cart');
	</script>
{% endif %}

{% if template == 'checkout' %}
<script>
	window.dataLayer = window.dataLayer || [];
	window.dataLayer.push({
		//'cartSubtotal': {{ cart.original_total_price | times: 0.01  }},
		'currency': '{{ checkout.currency }}',
		'orderID': '{{ order.name }}',
		//'pageCategory': '{{ handle }}',
		//'pageURL': '{{ page.url }}',
		'paymentMethod': '{{ transaction.gateway }}',
		//'productBrand': '{{ product.vendor }}',
		//'productName': '{{ product.title }}',
		//'productPrice': {{ product.price | times: 0.01 }},
		//'productSKU': '{{ variant.sku }}',
		//'quantity': {{ line_item.quantity | times: 1 }},
		'totalPurchase': {{ checkout.total_price | times: 0.01  }},
		//'url': '{{ canonical_url }}'
	});
	console.log(dataLayer);
	console.log('DL checkout done');
</script>	
{% endif %}