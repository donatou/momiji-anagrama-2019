{%- assign product = all_products[section.settings.product] -%}
{%- assign current_variant = product.selected_or_first_available_variant -%}
{%- assign featured_image = current_variant.featured_image | default: product.featured_image -%}

{% if product == empty %}
  {%- assign section_onboarding = true -%}
  {%- assign onboarding_title = 'homepage.onboarding.product_title' | t -%}
{% endif %}

<div id="featured-product__test">
    <div id="wrapper__test">
        <div id="grid__test">
            <div class="copy-wrapper__test featured-product__font-color">
                {{ section.settings.title_product }}
                <h2 class="featured-product__subtitle">{{ section.settings.subtitle_product }}</h2>

                <form action="/cart/add" method="post" enctype="multipart/form-data">
                    <button 
                        type="submit"
                        name="add"
                        class="btn__agregar--featured"
                        data-add-to-cart
                        {% unless product.available %}disabled="disabled"{% endunless %}
                        {% if section_onboarding %}disabled="disabled"{% endif %}>
                        <span data-add-to-cart-text>
                            {% if current_variant.available %}
                             {{ product.price | money_without_trailing_zeros }} <span class="featured-product__background-color">|</span> {{ 'products.product.add_to_cart' | t }}
                            {% else %}
                            {{ product.price | money_without_trailing_zeros }} <span class="featured-product__background-color">|</span> {{ 'products.product.sold_out' | t }}
                            {% endif %}
                        </span>
                    </button>
                </form>
              <a class="link__featured-product" href="/products/{{ section.settings.product }}">{{ 'shopify.checkout.general.tooltip_accessibility_label' | t}}</a>

            </div>
        {%-if section.settings.image_1-%}    
            <figure class="image-1__test">
              <img src="{{ section.settings.image_1 | img_url: '400x' }}" alt="Picsum" />
              <figcaption>Caption de la fotografia.</figcaption>
            </figure>
        {%-endif-%}
        </div>

    </div>
  {% if section.settings.background_image %}

  {% endif %}
</div>

<style>
#featured-product__test {
    min-height: 640px;
    width: 100%;
    position: relative;
    background-image: url({{ section.settings.background_image | img_url: '2107x' }});
    background-size: cover;
    background-repeat: no-repeat;
    background-position: bottom right;
    background-attachment: scroll;
    background-color: {{ settings.featured_product_background_color }};
}
#featured-product__test .img-wrapper__test {
    display: flex;
    width: 100%;
    height: 100vh;
}
.img-wrapper__test img {
    width: 100%;
    object-fit: cover;
    object-position: right;
}
#wrapper__test {
    margin: 0 60px;
    top: 0;
    min-width: 300px;
    min-height: 300px;
}
#grid__test {
    display: flex;
    height: 100vh;
    align-items: center;
}
.copy-wrapper__test h1 + h2, .copy-wrapper__test h2 + form {
    margin-top: 20px;
    max-width: 600px;
}
.image-1__test figcaption {
  display: inline-flex;
  writing-mode: vertical-rl;
  vertical-align: bottom;
  transform: rotate(180deg);
  margin-left: 10px;
  height:auto;
}
.image-1__test {
    display: flex;
    align-self: self-end;
}
.image-1__test img {
    height: max-content;
}
.featured-product__title {
  font-family: "GT Standard Packaging", sans-serif;
  font-weight: 500;
  font-style: normal;
  padding-top: 40px;
}
.featured-product__subtitle {
  font-family: "GT Standard Beta A3", sans-serif;
  font-size: 18px;
  letter-spacing: -0.2px;
  line-height: 23px;
  font-weight: 500;
  font-style: normal;
}
.featured-product__accent-color {
  color: {{ settings.featured_product_accent_color }};
}
.btn__agregar--featured {
  display: inline-block;
  font-family: "GT Standard Beta A3", sans-serif;
  font-style: normal;
  font-weight: normal;
  font-size: 14px;
  line-height: 1;
  letter-spacing: 0.01em;
  text-transform: uppercase;
  height: auto;
  text-align: center;
  padding: 10px 15px 13px 15px;
  border:0;
  background: {{ settings.featured_product_accent_color }};
  color: {{ settings.featured_product_font_color }};
}
.btn__agregar--featured:hover {
  background-color: #1959b9;
  color: white;
}
.link__featured-product {
  font-family: "GT Standard Beta A3", sans-serif;
  font-size: 12px;
  letter-spacing: 0.5px;
  line-height: 16px;
  font-weight: normal;
  font-style: normal;
  text-transform: uppercase;
  margin-top: 20px;
  border-bottom: 1px {{ settings.featured_product_font_color }} solid;
}
.link__featured-product:hover {
  border-bottom:none;
}
@media (max-width: 991.98px) {
  #featured-product__test {
      background-image: url({{ section.settings.background_image_992 | img_url: '992x' }});
  }
  .featured-product__title {
    padding-top: 60px;
    letter-spacing: -0.2px;
  }
  .copy-wrapper__test h1 + h2, .copy-wrapper__test h2 + form {
    max-width: 450px;
  }
  .image-1__test {
      display: flex;
      align-self: self-end;
  }   
}
@media (max-width: 767px) {
  #grid__test {
      display: flex;
      height: 80vh;
      align-items: flex-start;
  } 
  .featured-product__title {
    padding-top: 40px;
    letter-spacing: -0.2px;
  }
}
/*width*/
@media (max-width: 558px) {
  #wrapper__test {
    margin: 0 30px;
  }
  #grid__test {
      height: 80vh;
  }
  h1.featured-product__title {
    font-size: 55px;
    letter-spacing: -0.2px;
    line-height: 50px;
  }
}
/*height*/
@media (max-height: 558px) {
  #wrapper__test {
      padding-top: 60px;
  }
}
</style>

{% schema %}
  {
    "name": "Featured product TEST",
    "settings": [
      {
        "type": "product",
        "id": "product",
        "label": "Product"
      },
      {
        "type": "html",
        "id": "title_product",
        "label": "Copy principal H1"
      },
      {
        "type": "textarea",
        "id": "subtitle_product",
        "label": "Copy subt√≠tulo"
      },
      {
        "type": "image_picker",
        "id": "background_image",
        "label": "Background image"
      },
      {
        "type": "image_picker",
        "id": "background_image_992",
        "label": "Background width 992"
      },
      {
        "type": "image_picker",
        "id": "image_1",
        "label": "Imagen 1"
      }
    ],
    "presets": [
      {
        "name": "Featured product TEST",
        "category": "Product"
      }
    ]
  }
{% endschema %}