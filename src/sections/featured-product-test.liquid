{%- assign product = all_products[section.settings.product] -%}
{%- assign current_variant = product.selected_or_first_available_variant -%}
{%- assign featured_image = current_variant.featured_image | default: product.featured_image -%}

{% if product == empty %}
  {%- assign section_onboarding = true -%}
  {%- assign onboarding_title = 'homepage.onboarding.product_title' | t -%}
{% endif %}

<div id="featured-product">
    <div id="featured-product__wrapper">
        <div id="featured-product__content">
            <div class="featured-product_copy featured-product__font-color">
                {{ section.settings.title_product }}
                <h2 class="featured-product__subtitle">{{ section.settings.subtitle_product }}</h2>
              {% if section.settings.preorder %}
                <a class="btn__agregar--featured" href="/products/{{ section.settings.product }}">
                  {{ product.price | money_without_trailing_zeros }} — PREORDER
                </a>
              {% else %}
                <form 
                  action="/cart/add" 
                  data-productid="{{ current_variant.id }}" 
                  method="post"
                  id="AddToCartForm">
                  <input type="hidden" name="id" value="{{ current_variant.id }}">
                  <input type="hidden" name="quantity" value="1">
                  <button
                    class="btn__agregar--featured" 
                    type="submit" {% unless current_variant.available %}
                    disabled="disabled"{% endunless %}>
                  {% if current_variant.available %}
                    {{ product.price | money_without_trailing_zeros }} <span class="featured-product__background-color">—</span> {{ 'products.product.add_to_cart' | t }}
                  {% else %}
                    {{ product.price | money_without_trailing_zeros }} <span class="featured-product__background-color">—</span> {{ 'products.product.sold_out' | t }}
                  {% endif %}
                  </button>
                </form>
              {% endif %}
              {% if section.settings.preorder %}
              {% else %}
                <a class="link__featured-product" href="/products/{{ section.settings.product }}">{{ 'shopify.checkout.general.tooltip_accessibility_label' | t}}</a>
              {% endif %}
            </div>
        </div>
    </div>
</div>

<style>
#featured-product {
    min-height: 640px;
    width: 100%;
    position: relative;
    background-image: url({{ section.settings.background_image | img_url: '2107x' }});
    background-size: cover;
    background-repeat: no-repeat;
    background-position: bottom right;
    background-attachment: scroll;
    background-color: {{ settings.featured_product_background_color }};
}
#featured-product__wrapper {
    margin: 0 60px;
    top: 0;
    min-width: 300px;
    min-height: 300px;
}
#featured-product__content {
    display: flex;
    height: 100vh;
    align-items: center;
}
.featured-product_copy h1 + h2, .featured-product_copy h2 + form, .featured-product_copy h2 + a {
    margin-top: 20px;
    max-width: 600px;
}
.featured-product__title {
  font-family: "GT Standard Packaging", sans-serif;
  font-weight: 500;
  font-style: normal;
  padding-top: 40px;
}
.featured-product__subtitle {
  font-family: "GT Standard Beta A3", sans-serif;
  font-size: 18px;
  letter-spacing: -0.2px;
  line-height: 23px;
  font-weight: 500;
  font-style: normal;
}
.featured-product__accent-color {
  color: {{ settings.featured_product_accent_color }};
}
.btn__agregar--featured {
  transition: all 400ms cubic-bezier(0.445, 0.5, 0.55, 0.95);
}
.btn__agregar--featured {
  display: inline-block;
  font-family: "GT Standard Beta A3", sans-serif;
  font-style: normal;
  font-weight: normal;
  font-size: 14px;
  line-height: 1;
  letter-spacing: 0.01em;
  text-transform: uppercase;
  height: auto;
  text-align: center;
  padding: 10px 15px 13px 15px;
  border:0;
  background: {{ settings.featured_product_accent_color }};
  color: {{ settings.featured_product_font_color }};
}
.btn__agregar--featured:hover {
  background-color: {{ settings.featured_product_hover_color }};
  color: white;
}
.link__featured-product {
  font-family: "GT Standard Beta A3", sans-serif;
  font-size: 12px;
  letter-spacing: 0.5px;
  line-height: 16px;
  font-weight: normal;
  font-style: normal;
  text-transform: uppercase;
  margin-top: 20px;
  border-bottom: 1px {{ settings.featured_product_font_color }} solid;
}
.link__featured-product:hover {
  border-bottom:none;
}
@media (max-width: 991.98px) {
  #featured-product {
      background-image: url({{ section.settings.background_image_992 | img_url: '992x' }});
  }
  .featured-product__title {
    padding-top: 60px;
    letter-spacing: -0.2px;
  }
  .featured-product_copy h1 + h2, .featured-product_copy h2 + form {
    max-width: 450px;
  }
}
@media (max-width: 767px) {
  #featured-product__content {
      display: flex;
      height: 80vh;
      align-items: flex-start;
  }
  h1.featured-product__title {
    padding-top: 40px;
    font-size: 55px;
    letter-spacing: -0.2px;
    line-height: 50px;
  }
  .featured-product_copy h1 + h2, .featured-product_copy h2 + form {
    max-width: 350px;
  }
}
/*width*/
@media (max-width: 558px) {
  #featured-product {
      background-image: url({{ section.settings.background_image_558 | img_url: '558x' }});
  }
  #featured-product__wrapper {
    margin: 0 30px;
  }
  #featured-product__content {
      height: 80vh;
  }
  h1.featured-product__title {
    font-size: 55px;
    letter-spacing: -0.2px;
    line-height: 50px;
  }
  .featured-product_copy h1 + h2, .featured-product_copy h2 + form {
    max-width: 250px;
  }
}
/*height*/
@media (max-height: 558px) {
  #featured-product__wrapper {
      padding-top: 60px;
  }
}
</style>

{% schema %}
  {
    "name": "Featured product TEST",
    "settings": [
      {
        "type": "product",
        "id": "product",
        "label": "Product"
      },
      {
        "id": "preorder",
        "type": "checkbox",
        "label": "Es producto para preorder"
      },
      {
        "type": "html",
        "id": "title_product",
        "label": "Copy principal H1"
      },
      {
        "type": "textarea",
        "id": "subtitle_product",
        "label": "Copy subtítulo"
      },
      {
        "type": "image_picker",
        "id": "background_image",
        "label": "Background image"
      },
      {
        "type": "image_picker",
        "id": "background_image_992",
        "label": "Background width 992"
      },
      {
        "type": "image_picker",
        "id": "background_image_558",
        "label": "Background width 558"
      }
    ],
    "presets": [
      {
        "name": "Featured product TEST",
        "category": "Product"
      }
    ]
  }
{% endschema %}