{%- assign product = all_products[section.settings.product] -%}
{%- assign current_variant = product.selected_or_first_available_variant -%}
{%- assign featured_image = current_variant.featured_image | default: product.featured_image -%}

{% if product == empty %}
  {%- assign section_onboarding = true -%}
  {%- assign onboarding_title = 'homepage.onboarding.product_title' | t -%}
{% endif %}

<div id="featured-product__test">
    <div id="wrapper__test">
        <div id="grid__test">
            <div class="copy-wrapper__test featured-product__font-color">
                {{ section.settings.title_product }}
                <h2 class="featured-product__subtitle">{{ section.settings.subtitle_product }}</h2>

                <form action="/cart/add" method="post" enctype="multipart/form-data">
                    <button 
                        type="submit"
                        name="add"
                        class="btn__agregar--featured"
                        data-add-to-cart
                        {% unless product.available %}disabled="disabled"{% endunless %}
                        {% if section_onboarding %}disabled="disabled"{% endif %}>
                        <span data-add-to-cart-text>
                            {% if current_variant.available %}
                             {{ product.price | money_without_trailing_zeros }} <span class="featured-product__background-color">|</span> {{ 'products.product.add_to_cart' | t }}
                            {% else %}
                            {{ product.price | money_without_trailing_zeros }} <span class="featured-product__background-color">|</span> {{ 'products.product.sold_out' | t }}
                            {% endif %}
                        </span>
                    </button>
                </form>

            </div>
        {%-if section.settings.image_1-%}    
            <figure class="image-1__test">
              <img src="{{ section.settings.image_1 | img_url: '400x' }}" alt="Picsum" />
              <figcaption>Caption de la fotografia.</figcaption>
            </figure>
        {%-endif-%}
        </div>
    </div>
  {% if section.settings.background_image %}
    <div class="img-wrapper__test">
      <img srcset="https://picsum.photos/1800/1000?white 500w, https://picsum.photos/1800/1000?white" src="https://picsum.photos/1800/1000?white" alt="Image" />
    </div>
  {% endif %}
</div>

<style>
#featured-product__test {
    height: 100vh;
    min-height: 640px;
    position: relative;
    overflow: hidden; 
    background-color: {{ settings.featured_product_background_color }};
}
#featured-product__test .img-wrapper__test {
    display: flex;
    width: 100%;
    height: 100vh;
}
.img-wrapper__test img {
    width: 100%;
    object-fit: cover;
    object-position: right;
}
#wrapper__test {
    position: absolute;
    margin: 40px 30px;
    top: 0;
    width: 100vw;
    height: 100vh;
    min-width: 300px;
    min-height: 300px;
    max-width: calc(100vw - 60px);
    max-height: calc(100vh - 80px);
    overflow: hidden;
}
#grid__test {
    display: grid;
    grid-template-columns: 16.666% 16.666% 16.666% 16.666% 16.666% 16.666%;
    /*grid-template-rows: 12.5% 12.5% 12.5% 12.5% 12.5% 12.5% 12.5% 12.5%;*/
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
.copy-wrapper__test {
    grid-column: 1/4;
    grid-row: auto;
    align-self: center;
}
@media (max-width: 991.98px) {
    .copy-wrapper__test {
        grid-column: 1/4;
        grid-row: auto;
        align-self: center;
    }    
}
.copy-wrapper__test h1 + h2, .copy-wrapper__test h2 + form {
    margin-top: 20px;
    padding-right: 80px;
}
.image-1__test figcaption {
  display: inline-flex;
  writing-mode: vertical-rl;
  vertical-align: bottom;
  transform: rotate(180deg);
  margin-left: 10px;
  height:auto;
}
.image-1__test {
    display: flex;
    /* grid-column: 4/7;
    grid-row: auto;
    height: fit-content; */
    align-self: self-end;
}
@media (max-width: 991.98px) {
  .image-1__test {
      display: flex;
      /* grid-column:2/7;
      grid-row: auto; */
      align-self: self-end;
  }   
}
.image-1__test img {
    height: max-content;
}
.featured-product__title {
  font-family: "GT Standard Packaging", sans-serif;
  font-weight: 500;
  font-style: normal;
  padding-top: 40px;
}
@media (max-width: 991.98px) {
  .featured-product__title {
    padding-top: 60px;
    letter-spacing: -0.2px;
  }
  .copy-wrapper__test h1 + h2, .copy-wrapper__test h2 + form {
    padding-right: 60px;
  }
}
@media (max-width: 767px) {
  .featured-product__title {
    padding-top: 40px;
    letter-spacing: -0.2px;
  }
  .copy-wrapper__test h1 + h2, .copy-wrapper__test h2 + form {
    padding-right: 10px;
  }
}

.featured-product__subtitle {
  font-family: "GT Standard Beta A3", sans-serif;
  font-size: 18px;
  letter-spacing: -0.2px;
  line-height: 23px;
  font-weight: 500;
  font-style: normal;
}

.featured-product__accent-color {
  color: {{ settings.featured_product_accent_color }};
}
.btn__agregar--featured {
  background: {{ settings.featured_product_accent_color }};
  display: inline-block;
  height: 35px;
  text-align: center;
  padding: 8px 15px 8px 15px;
  padding-top: 8px;
  border:0;
  color: {{ settings.featured_product_font_color }};
}

.btn__agregar--featured:hover {
  background-color: #1959b9;
  color: white;
}
</style>

{% schema %}
  {
    "name": "Featured product TEST",
    "settings": [
      {
        "type": "product",
        "id": "product",
        "label": "Product"
      },
      {
        "type": "html",
        "id": "title_product",
        "label": "Copy principal H1"
      },
      {
        "type": "textarea",
        "id": "subtitle_product",
        "label": "Copy subt√≠tulo"
      },
      {
        "type": "image_picker",
        "id": "background_image",
        "label": "Background image"
      },
      {
        "type": "image_picker",
        "id": "image_1",
        "label": "Imagen 1"
      }
    ],
    "presets": [
      {
        "name": "Featured product TEST",
        "category": "Product"
      }
    ]
  }
{% endschema %}