 {{ 'shopify_common.js' | shopify_asset_url | script_tag }}

<main class="cuenta">
  
  <section class="cuenta__detalle section__principal">
    <div class="container">
      <div class="row">
          <div class="col-12 cuenta__title">
              {% comment %} Mi cuenta {% endcomment %}
              <h2>{{ 'customer.account.title' | t }}</h2>
          </div>
      </div>

      <div class="row mt-50 row-mobile">
        <div class="col-md-12 col-lg-6 p-0">
          <div class="col-12 section__title">
          {% comment %} Historial de ordenes {% endcomment %}
            <h3>{{ 'customer.orders.title' | t }}</h3>
          </div>

        {% comment %} Layout desktop END {% endcomment %}
          <div class="col-12 d-none d-md-block">
            <table>
              <tr>
                <th>{{ 'customer.orders.order_number' | t }}</th>
                <th>{{ 'customer.orders.date' | t }}</th>
                <th>{{ 'customer.orders.fulfillment_status' | t }}</th>
                <th>{{ 'shopify.checkout.order_summary.discount_title' | t }}</th>
                <th>{{ 'customer.orders.total' | t }}</th>
              </tr>
              {% if customer.orders.size != 0 %}
              {% for order in customer.orders %}
              <tr>
                <td>{{ order.name | link_to: order.customer_url }}</td>
                <td>{{ order.created_at | date: format: 'month_day_year' }}</td>
                <td>{{ order.fulfillment_status_label }}</td>
                {% if order.total_discounts != 0 %}
                  {% for discount_application in order.discount_applications %}
                    <td>{{ discount_application.title }}</td>
                  {% endfor %}
                  {% else %}
                    <td>Ninguno</td>
                {% endif %}
                <td>{{ order.total_price | money }}</td>
              </tr>
              {% endfor %}
              {% else %}
                <p>{{ 'customer.orders.none' | t }}</p>
              {% endif %}
            </table>
          </div>
        {% comment %} Layout desktop END {% endcomment %}

        {% comment %} Layout moviles {% endcomment %}
          <div class="col-12 d-md-none">
          {% if customer.orders.size != 0 %}
          {% for order in customer.orders %}
            <div class="card__order">
              <table>
                <tr>
                  <th>{{ 'customer.orders.order_number' | t }}</th>
                  <td>{{ order.name | link_to: order.customer_url }}</td>
                </tr>
                <tr>
                  <th>{{ 'customer.orders.date' | t }}</th>
                  <td>{{ order.created_at | date: format: 'month_day_year' }}</td>
                </tr>
                <tr>
                  <th>{{ 'customer.orders.fulfillment_status' | t }}</th>
                  <td>{{ order.fulfillment_status_label }}</td>
                </tr>
                <tr>
                  <th>{{ 'shopify.checkout.order_summary.discount_label' | t }}</th>
                  {% if order.total_discounts != 0 %}
                  {% for discount_application in order.discount_applications %}
                    <td>{{ discount_application.title }}</td>
                  {% endfor %}
                  {% else %}
                    <td>Ninguno</td>
                  {% endif %}
                </tr>
                <tr>
                  <th>{{ 'customer.orders.total' | t }}</th> 
                  <td>{{ order.total_price | money }}</td>
                </tr>
              </table>
            </div>
          {% endfor %}  
          {% else %}
            <p>{{ 'customer.orders.none' | t }}</p>
          {% endif %}          
          </div>
        {% comment %} Layout moviles END {% endcomment %}  

        </div>

        <div class="col-md-12 col-lg-6 br">
          <div class="row">
            <div class="col-md-12 col-lg-9 mx-auto">
              <div class="row">
                <div class="col-12 section__title">
                  <h3>{{ 'shopify.page_titles.addresses' | t }}</h3>
                </div>
                <div class="col-md-6 col-lg-12 cuenta__direccion">
                  <b>{{ customer.name }}</b>
                  <p>{{ customer.email }}</p>
                  <p>{{ customer.metafields['customer']['birthday'] }}</p>
                </div>

              {% for address in customer.addresses %}
                <div class="col-md-6 col-lg-12 cuenta__direccion">
                {% if address == customer.default_address %}
                  <p class="text-link">{{ 'customer.addresses.default' | t }}</p>
                {% endif %}
                  <b>{{ address.name }}</b>
                  <p>{{ address.email }}</p>
                  <address data-addressId={{ address.id }}>{{ address.company }}, {{ address.address2 }}, {{ address.address1 }}, {{ address.city }}, {{ address.province_code }}, {{ address.country }}. {{ 'shopify.addresses.zip_code'| t }} {{ address.zip }}</address>
                  <p>{{ address.phone }}</p>
                  <div class="btn--100">
                    <a class="btn__main" href="/account/addresses">{{ 'customer.addresses.edit_address' | t }}</a>
                    <a class="btn__main btn__main--lighter" href="/">{{ 'customer.addresses.delete' | t }}</a>
                  </div>
                </div>
              {% endfor %}

        {% comment %}
          <div class="row">
            <div class="col-md-10 col-lg-5 mx-auto mt-30">
              <form action="" class="row">
                <div class="col-12">
                  <p class="text-link">Direcci√≥n principal</p>
        {% endcomment %}

{% comment %} {% form 'customer_address', customer.new_address %}

  <input type="text" id="AddressFirstName_{{ form.id }}" class="input-full" name="address[first_name]" value="{{ form.first_name }}" autocapitalize="words" placeholder="{{ 'customer.addresses.first_name' | t }}" required>
  <div class="input-error"><p>{{ 'shopify.checkout.field_errors.address_first_name_blank' | t }}</p></div>

  <input type="text" id="AddressLastName_{{ form.id }}" class="input-full" name="address[last_name]" value="{{ form.last_name }}" autocapitalize="words" placeholder="{{ 'customer.addresses.last_name' | t }}" required>
  <div class="input-error"><p>{{ 'shopify.checkout.field_errors.address_last_name_blank' | t }}</p></div>

  <input type="text" id="AddressCompany_{{ form.id }}" class="input-full" name="address[company]" value="{{ form.company }}" autocapitalize="words" placeholder="{{ 'customer.addresses.company' | t }}">
  <div class="input-error"><p>{{ 'shopify.checkout.field_errors.address_company_blank' | t }}</p></div>

  <input type="text" id="AddressAddress2_{{ form.id }}" class="input-full" name="address[address2]" value="{{ form.address2 }}" autocapitalize="words" placeholder="{{ 'customer.addresses.address2' | t }}" required>
  <div class="input-error"><p>{{ 'shopify.checkout.field_errors.address_address2_blank' | t }}</p></div>

  <input type="text" id="AddressAddress1_{{ form.id }}" class="input-full" name="address[address1]" value="{{ form.address1 }}" autocapitalize="words" placeholder="{{ 'customer.addresses.address1' | t }}" required>
  <div class="input-error"><p>{{ 'shopify.checkout.field_errors.address_address1_blank' | t }}</p></div>

  <input type="text" id="AddressCity_{{ form.id }}" class="input-full" name="address[city]" value="{{ form.city }}" autocapitalize="words" placeholder="{{ 'customer.addresses.city' | t }}" required>
  <div class="input-error"><p>{{ 'shopify.checkout.field_errors.address_city_blank' | t }}</p></div>
  <select name="address[province]" id="AddressProvince_{{ form.id }}" value="{{ form.province }}" placeholder="Estado" data-default="{{form.province}}" required></select>


<!--
nombres <input type="text" id="AddressFirstName_{{ form.id }}" class="input-full" name="address[first_name]" value="{{ form.first_name }}" autocapitalize="words" placeholder="{{ 'customer.addresses.first_name' | t }}" required>

apellidos <input type="text" id="AddressLastName_{{ form.id }}" class="input-full" name="address[last_name]" value="{{ form.last_name }}" autocapitalize="words" placeholder="{{ 'customer.addresses.last_name' | t }}" required>

calle y numero (company) <input type="text" id="AddressCompany_{{ form.id }}" class="input-full" name="address[company]" value="{{ form.company }}" autocapitalize="words" placeholder="{{ 'customer.addresses.company' | t }}">

referencia (address2) <input type="text" id="AddressAddress2_{{ form.id }}" class="input-full" name="address[address2]" value="{{ form.address2 }}" autocapitalize="words" placeholder="{{ 'customer.addresses.address2' | t }}" required>

colonia (address1) <input type="text" id="AddressAddress1_{{ form.id }}" class="input-full" name="address[address1]" value="{{ form.address1 }}" autocapitalize="words" placeholder="{{ 'customer.addresses.address1' | t }}" required>

ciudad (city) <input type="text" id="AddressCity_{{ form.id }}" class="input-full" name="address[city]" value="{{ form.city }}" autocapitalize="words" placeholder="{{ 'customer.addresses.city' | t }}" required>

shopify.checkout.field_errors.address_province_blank
edo (province code)

pais (country)

cp (address zip)
 -->

{% endform %} {% endcomment %}


                <div class="col-12 cuenta__agregar">
                  <p class="text-link">{{ 'customer.addresses.add_new' | t }}<a href="cuenta-direccion.html" class="btn__more"></a></p>
                </div>
              </div>
              
            </div>
            
          </div>
        </div>
      </div>
        
    </div>
  </section>
    
</main>

<script>
// Initialize observers on address selectors
new Shopify.CountryProvinceSelector('AddressCountryNew', 'AddressProvinceNew', {
  hideElement: 'AddressProvinceContainerNew'
});

// Setup province selector on each customer address
{% for address in customer.addresses %}
  new Shopify.CountryProvinceSelector('AddressCountry_{{ address.id }}', 'AddressProvince_{{ address.id }}', {
    hideElement: 'AddressProvinceContainer_{{ address.id }}'}
  );
{% endfor %}

 

  // Modified contents of customer_area.js (global asset)
  Shopify.CustomerAddress = {
    toggleForm: function(id) {
      var editEl = document.getElementById('EditAddress_'+id);
      editEl.style.display = editEl.style.display == 'none' ? '' : 'none';
      return false;
    },

    toggleNewForm: function() {
      var addEl = document.getElementById('AddAddress_'+id);
      addEl.style.display = addEl.style.display == 'none' ? '' : 'none';
      return false;
    },

    destroy: function(id, confirm_msg) {
      if (confirm(confirm_msg || "Are you sure you wish to delete this address?")) {
        Shopify.postLink('/account/addresses/'+id, {'parameters': {'_method': 'delete'}});
      }
    }
  }

    // Initialize observers on address selectors
  new Shopify.CountryProvinceSelector('address_country_new', 'address_province_new', {
    hideElement: 'address_province_container_new'
  });
</script>